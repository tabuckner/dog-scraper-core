"use strict";var t=require("request-promise"),e=require("cheerio");const r=function(){function t(){}return t.prototype.then=function(e,r){const i=new t,o=this.s;if(o){const t=1&o?e:r;if(t){try{n(i,1,t(this.v))}catch(t){n(i,2,t)}return i}return this}return this.o=function(t){try{const o=t.v;1&t.s?n(i,1,e?e(o):o):r?n(i,1,r(o)):n(i,2,o)}catch(t){n(i,2,t)}},i},t}();function n(t,e,i){if(!t.s){if(i instanceof r){if(!i.s)return void(i.o=n.bind(null,t,e));1&e&&(e=i.s),i=i.v}if(i&&i.then)return void i.then(n.bind(null,t,e),n.bind(null,t,2));t.s=e,t.v=i;const o=t.o;o&&o(t)}}function i(t){return t instanceof r&&1&t.s}const o="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var u=function(){function e(){}return e.load=function(e){if(!e)throw new Error("You must provide a URL.");return t.get(e)},e}();function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var c=function(){function t(t,e){if(this.htmlString=t,this.options=e,!this.htmlString)throw new Error("You must provide an HTML string.");this.$=this.load(t,e)}return t.prototype.load=function(t,r){return e.load(t,r)},t}(),a=function(t){function e(e){var r;return(r=t.call(this,e)||this).dropDownSelector="select#breed-search",r.optionSelector="option",r}return s(e,t),e.prototype.getBreedLinks=function(){var t=this,e=[];return this.targetDropDown=this.$(this.dropDownSelector).get(0),this.$(this.targetDropDown).find(this.optionSelector).each(function(r,n){var i=t.$(n).attr("value");i&&i.length>0&&e.push(i)}),e},e}(c),f=function(t){function e(e){var r;return(r=t.call(this,e)||this).attributeListSelector=".attribute-list",r.attributeListRowSelector=".attribute-list__row",r.attributeTermSelector=".attribute-list__term",r.attributeDescriptionSelector=".attribute-list__description",r}return s(e,t),e.prototype.getBreedsAttributes=function(){var t=this,e=[];return this.$(this.attributeListSelector).find(this.attributeListRowSelector).each(function(r,n){var i=t.$(n),o=i.find(t.attributeTermSelector).text(),u=i.find(t.attributeDescriptionSelector).text(),s=u.indexOf(", ")>-1,c={attribute:o.substring(0,o.length-1),description:u};if(s){var a=u.split(", ");c.descriptionList=a}e.push(c)}),e},e}(c);exports.DogScraper=function(){function t(){}var e=t.prototype;return e.getBreedInfo=function(){try{var t=this;return Promise.resolve(t.getBreedsPage()).then(function(){return t.getBreedLinks(),Promise.resolve(t.setBreedInfo()).then(function(){return t.breedInfo})})}catch(t){return Promise.reject(t)}},e.setBreedInfo=function(){try{var t=this;t.breedInfo={};var e=function(t,e,u){if("function"==typeof t[o]){var s,c,a,f=t[o]();if(function t(o){try{for(;!(s=f.next()).done;)if((o=e(s.value))&&o.then){if(!i(o))return void o.then(t,a||(a=n.bind(null,c=new r,2)));o=o.v}c?n(c,1,o):c=o}catch(t){n(c||(c=new r),2,t)}}(),f.return){var h=function(t){try{s.done||f.return()}catch(t){}return t};if(c&&c.then)return c.then(h,function(t){throw h(t)});h()}return c}if(!("length"in t))throw new TypeError("Object is not iterable");for(var l=[],d=0;d<t.length;d++)l.push(t[d]);return function(t,e,o){var u,s,c=-1;return function o(a){try{for(;++c<t.length;)if((a=e(c))&&a.then){if(!i(a))return void a.then(o,s||(s=n.bind(null,u=new r,2)));a=a.v}u?n(u,1,a):u=a}catch(t){n(u||(u=new r),2,t)}}(),u}(l,function(t){return e(l[t])})}(t.breedLinks,function(e){var r=function(t){if(!e||e.length<1)return e;var r=e.split("/dog-breeds");return r[1]?r[1].replace(/\//g,""):""}(),n=function(t){return t.split("-").join(" ")}(r);return Promise.resolve(u.load(e)).then(function(e){var i=new f(e).getBreedsAttributes();t.breedInfo[r]={displayName:n,attributes:i}})});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},e.getBreedLinks=function(){try{return this.breedLinks=new a(this.breedsPageHtmlString).getBreedLinks(),Promise.resolve()}catch(t){return Promise.reject(t)}},e.getBreedsPage=function(){try{var t=this;return Promise.resolve(u.load("https://www.akc.org/dog-breeds/")).then(function(e){t.breedsPageHtmlString=e})}catch(t){return Promise.reject(t)}},t}();
//# sourceMappingURL=dog-scraper-core.cjs.production.min.js.map
